From b10e3d278d9bb5f7511e4ae3964b760da81de9a6 Mon Sep 17 00:00:00 2001
From: Nathan Rossi <nathan@nathanrossi.com>
Date: Thu, 31 Jan 2019 22:30:36 +1000
Subject: [PATCH] WIP: ultra96 copied from petalinux BSP

---
 lib/sw_apps/zynqmp_pmufw/misc/xiicps_g.c    |   5 -
 lib/sw_apps/zynqmp_pmufw/misc/xipipsu_g.c   |  48 +--
 lib/sw_apps/zynqmp_pmufw/misc/xparameters.h | 431 ++++++++------------
 lib/sw_apps/zynqmp_pmufw/misc/xsdps_g.c     |  11 +
 lib/sw_apps/zynqmp_pmufw/misc/xusbpsu_g.c   |   8 +-
 5 files changed, 203 insertions(+), 300 deletions(-)

diff --git a/lib/sw_apps/zynqmp_pmufw/misc/xiicps_g.c b/lib/sw_apps/zynqmp_pmufw/misc/xiicps_g.c
index 5bf9c178e7..b3f6943afd 100644
--- a/lib/sw_apps/zynqmp_pmufw/misc/xiicps_g.c
+++ b/lib/sw_apps/zynqmp_pmufw/misc/xiicps_g.c
@@ -35,11 +35,6 @@
 
 XIicPs_Config XIicPs_ConfigTable[XPAR_XIICPS_NUM_INSTANCES] =
 {
-	{
-		XPAR_PSU_I2C_0_DEVICE_ID,
-		XPAR_PSU_I2C_0_BASEADDR,
-		XPAR_PSU_I2C_0_I2C_CLK_FREQ_HZ
-	},
 	{
 		XPAR_PSU_I2C_1_DEVICE_ID,
 		XPAR_PSU_I2C_1_BASEADDR,
diff --git a/lib/sw_apps/zynqmp_pmufw/misc/xipipsu_g.c b/lib/sw_apps/zynqmp_pmufw/misc/xipipsu_g.c
index 7716d7c09d..e9e334df82 100644
--- a/lib/sw_apps/zynqmp_pmufw/misc/xipipsu_g.c
+++ b/lib/sw_apps/zynqmp_pmufw/misc/xipipsu_g.c
@@ -33,15 +33,15 @@
 * The configuration table for devices
 */
 
-XIpiPsu_Config XIpiPsu_ConfigTable[] =
+XIpiPsu_Config XIpiPsu_ConfigTable[XPAR_XIPIPSU_NUM_INSTANCES] =
 {
 
 	{
-		XPAR_XIPIPSU_0_DEVICE_ID,
-		XPAR_XIPIPSU_0_BASE_ADDRESS,
-		XPAR_XIPIPSU_0_BIT_MASK,
-		XPAR_XIPIPSU_0_BUFFER_INDEX,
-		XPAR_XIPIPSU_0_INT_ID,
+		XPAR_PSU_IPI_3_DEVICE_ID,
+		XPAR_PSU_IPI_3_BASE_ADDRESS,
+		XPAR_PSU_IPI_3_BIT_MASK,
+		XPAR_PSU_IPI_3_BUFFER_INDEX,
+		XPAR_PSU_IPI_3_INT_ID,
 		XPAR_XIPIPSU_NUM_TARGETS,
 		{
 
@@ -75,13 +75,13 @@ XIpiPsu_Config XIpiPsu_ConfigTable[] =
 			}
 		}
 	},
-	
+
 	{
-		XPAR_XIPIPSU_1_DEVICE_ID,
-		XPAR_XIPIPSU_1_BASE_ADDRESS,
-		XPAR_XIPIPSU_1_BIT_MASK,
-		XPAR_XIPIPSU_1_BUFFER_INDEX,
-		XPAR_XIPIPSU_1_INT_ID,
+		XPAR_PSU_IPI_4_DEVICE_ID,
+		XPAR_PSU_IPI_4_BASE_ADDRESS,
+		XPAR_PSU_IPI_4_BIT_MASK,
+		XPAR_PSU_IPI_4_BUFFER_INDEX,
+		XPAR_PSU_IPI_4_INT_ID,
 		XPAR_XIPIPSU_NUM_TARGETS,
 		{
 
@@ -115,13 +115,13 @@ XIpiPsu_Config XIpiPsu_ConfigTable[] =
 			}
 		}
 	},
-	
+
 	{
-		XPAR_XIPIPSU_2_DEVICE_ID,
-		XPAR_XIPIPSU_2_BASE_ADDRESS,
-		XPAR_XIPIPSU_2_BIT_MASK,
-		XPAR_XIPIPSU_2_BUFFER_INDEX,
-		XPAR_XIPIPSU_2_INT_ID,
+		XPAR_PSU_IPI_5_DEVICE_ID,
+		XPAR_PSU_IPI_5_BASE_ADDRESS,
+		XPAR_PSU_IPI_5_BIT_MASK,
+		XPAR_PSU_IPI_5_BUFFER_INDEX,
+		XPAR_PSU_IPI_5_INT_ID,
 		XPAR_XIPIPSU_NUM_TARGETS,
 		{
 
@@ -155,13 +155,13 @@ XIpiPsu_Config XIpiPsu_ConfigTable[] =
 			}
 		}
 	},
-	
+
 	{
-		XPAR_XIPIPSU_3_DEVICE_ID,
-		XPAR_XIPIPSU_3_BASE_ADDRESS,
-		XPAR_XIPIPSU_3_BIT_MASK,
-		XPAR_XIPIPSU_3_BUFFER_INDEX,
-		XPAR_XIPIPSU_3_INT_ID,
+		XPAR_PSU_IPI_6_DEVICE_ID,
+		XPAR_PSU_IPI_6_BASE_ADDRESS,
+		XPAR_PSU_IPI_6_BIT_MASK,
+		XPAR_PSU_IPI_6_BUFFER_INDEX,
+		XPAR_PSU_IPI_6_INT_ID,
 		XPAR_XIPIPSU_NUM_TARGETS,
 		{
 
diff --git a/lib/sw_apps/zynqmp_pmufw/misc/xparameters.h b/lib/sw_apps/zynqmp_pmufw/misc/xparameters.h
index 1180fe6242..780897a79a 100644
--- a/lib/sw_apps/zynqmp_pmufw/misc/xparameters.h
+++ b/lib/sw_apps/zynqmp_pmufw/misc/xparameters.h
@@ -94,17 +94,17 @@
 /******************************************************************/
 
 
-#define XPAR_PSU_PSS_REF_CLK_FREQ_HZ 33330000U
+#define XPAR_PSU_PSS_REF_CLK_FREQ_HZ 33333333U
 
 #define PSU_PMU 1U
-#define XPS_BOARD_ZCU102
+#define XPS_BOARD_ULTRA96V1
 
 
 /* Number of Fabric Resets */
 #define XPAR_NUM_FABRIC_RESETS 1
 
-#define STDIN_BASEADDRESS 0xFF000000
-#define STDOUT_BASEADDRESS 0xFF000000
+#define STDIN_BASEADDRESS 0xFF010000
+#define STDOUT_BASEADDRESS 0xFF010000
 
 /******************************************************************/
 
@@ -115,25 +115,6 @@
 
 
 /******************************************************************/
-/* Definitions for driver AVBUF */
-#define XPAR_XAVBUF_NUM_INSTANCES 1
-
-/* Definitions for peripheral PSU_DP */
-#define XPAR_PSU_DP_DEVICE_ID 0
-#define XPAR_PSU_DP_BASEADDR 0xFD4A0000
-#define XPAR_PSU_DP_HIGHADDR 0xFD4AFFFF
-
-
-/******************************************************************/
-
-/* Canonical definitions for peripheral PSU_DP */
-#define XPAR_XAVBUF_0_DEVICE_ID XPAR_PSU_DP_DEVICE_ID
-#define XPAR_XAVBUF_0_BASEADDR 0xFD4A0000
-#define XPAR_XAVBUF_0_HIGHADDR 0xFD4AFFFF
-
-
-/******************************************************************/
-
 /* Definitions for driver AXIPMON */
 #define XPAR_XAXIPMON_NUM_INSTANCES 4U
 
@@ -320,27 +301,6 @@
 #define XPAR_AXIPMON_3_ENABLE_32BIT_FILTER_ID 1U
 
 
-/******************************************************************/
-
-/* Definitions for driver CANPS */
-#define XPAR_XCANPS_NUM_INSTANCES 1
-
-/* Definitions for peripheral PSU_CAN_1 */
-#define XPAR_PSU_CAN_1_DEVICE_ID 0
-#define XPAR_PSU_CAN_1_BASEADDR 0xFF070000
-#define XPAR_PSU_CAN_1_HIGHADDR 0xFF07FFFF
-#define XPAR_PSU_CAN_1_CAN_CLK_FREQ_HZ 99990005
-
-
-/******************************************************************/
-
-/* Canonical definitions for peripheral PSU_CAN_1 */
-#define XPAR_XCANPS_0_DEVICE_ID XPAR_PSU_CAN_1_DEVICE_ID
-#define XPAR_XCANPS_0_BASEADDR 0xFF070000
-#define XPAR_XCANPS_0_HIGHADDR 0xFF07FFFF
-#define XPAR_XCANPS_0_CAN_CLK_FREQ_HZ 99990005
-
-
 /******************************************************************/
 
 /* Definitions for driver CSUDMA */
@@ -372,28 +332,20 @@
 #define XPAR_PSU_DDRC_0_BASEADDR 0xFD070000
 #define XPAR_PSU_DDRC_0_HIGHADDR 0xFD070FFF
 #define XPAR_PSU_DDRC_0_HAS_ECC 0
-#define XPAR_PSU_DDRC_0_DDRC_CLK_FREQ_HZ 533280029
+#define XPAR_PSU_DDRC_0_DDRC_CLK_FREQ_HZ 266666664
 
 
 /******************************************************************/
 
-#define XPAR_PSU_DDRC_0_DDR4_ADDR_MAPPING 0
-#define XPAR_PSU_DDRC_0_DDR_FREQ_MHZ 1066.560059
-#define XPAR_PSU_DDRC_0_VIDEO_BUFFER_SIZE 0
-#define XPAR_PSU_DDRC_0_BRC_MAPPING 0
 /* Canonical definitions for peripheral PSU_DDRC_0 */
 #define XPAR_DDRCPSU_0_DEVICE_ID XPAR_PSU_DDRC_0_DEVICE_ID
 #define XPAR_DDRCPSU_0_BASEADDR 0xFD070000
 #define XPAR_DDRCPSU_0_HIGHADDR 0xFD070FFF
-#define XPAR_DDRCPSU_0_DDRC_CLK_FREQ_HZ 533280029
+#define XPAR_DDRCPSU_0_DDRC_CLK_FREQ_HZ 266666664
 
 
 /******************************************************************/
 
-#define XPAR_DDRCPSU_0_DDR4_ADDR_MAPPING 0
-#define XPAR_DDRCPSU_0_DDR_FREQ_MHZ 1066.560059
-#define XPAR_DDRCPSU_0_VIDEO_BUFFER_SIZE 0
-#define XPAR_DDRCPSU_0_BRC_MAPPING 0
 /* Definitions for driver DPDMA */
 #define XPAR_XDPDMA_NUM_INSTANCES 1
 
@@ -413,39 +365,21 @@
 
 /******************************************************************/
 
-/* Definitions for driver EMACPS */
-#define XPAR_XEMACPS_NUM_INSTANCES 1
+/* Definitions for driver DPPSU */
+#define XPAR_XDPPSU_NUM_INSTANCES 1
 
-/* Definitions for peripheral PSU_ETHERNET_3 */
-#define XPAR_PSU_ETHERNET_3_DEVICE_ID 0
-#define XPAR_PSU_ETHERNET_3_BASEADDR 0xFF0E0000
-#define XPAR_PSU_ETHERNET_3_HIGHADDR 0xFF0EFFFF
-#define XPAR_PSU_ETHERNET_3_ENET_CLK_FREQ_HZ 124987511
-#define XPAR_PSU_ETHERNET_3_ENET_SLCR_1000MBPS_DIV0 12
-#define XPAR_PSU_ETHERNET_3_ENET_SLCR_1000MBPS_DIV1 1
-#define XPAR_PSU_ETHERNET_3_ENET_SLCR_100MBPS_DIV0 60
-#define XPAR_PSU_ETHERNET_3_ENET_SLCR_100MBPS_DIV1 1
-#define XPAR_PSU_ETHERNET_3_ENET_SLCR_10MBPS_DIV0 60
-#define XPAR_PSU_ETHERNET_3_ENET_SLCR_10MBPS_DIV1 10
-#define XPAR_PSU_ETHERNET_3_ENET_TSU_CLK_FREQ_HZ 249975021
+/* Definitions for peripheral PSU_DP */
+#define XPAR_PSU_DP_DEVICE_ID 0
+#define XPAR_PSU_DP_BASEADDR 0xFD4A0000
+#define XPAR_PSU_DP_HIGHADDR 0xFD4AFFFF
 
 
 /******************************************************************/
 
-#define XPAR_PSU_ETHERNET_3_IS_CACHE_COHERENT 0
-#define XPAR_XEMACPS_0_IS_CACHE_COHERENT 0
-/* Canonical definitions for peripheral PSU_ETHERNET_3 */
-#define XPAR_XEMACPS_0_DEVICE_ID XPAR_PSU_ETHERNET_3_DEVICE_ID
-#define XPAR_XEMACPS_0_BASEADDR 0xFF0E0000
-#define XPAR_XEMACPS_0_HIGHADDR 0xFF0EFFFF
-#define XPAR_XEMACPS_0_ENET_CLK_FREQ_HZ 124987511
-#define XPAR_XEMACPS_0_ENET_SLCR_1000Mbps_DIV0 12
-#define XPAR_XEMACPS_0_ENET_SLCR_1000Mbps_DIV1 1
-#define XPAR_XEMACPS_0_ENET_SLCR_100Mbps_DIV0 60
-#define XPAR_XEMACPS_0_ENET_SLCR_100Mbps_DIV1 1
-#define XPAR_XEMACPS_0_ENET_SLCR_10Mbps_DIV0 60
-#define XPAR_XEMACPS_0_ENET_SLCR_10Mbps_DIV1 10
-#define XPAR_XEMACPS_0_ENET_TSU_CLK_FREQ_HZ 249975021
+/* Canonical definitions for peripheral PSU_DP */
+#define XPAR_XDPPSU_0_DEVICE_ID XPAR_PSU_DP_DEVICE_ID
+#define XPAR_XDPPSU_0_BASEADDR 0xFD4A0000
+#define XPAR_XDPPSU_0_HIGHADDR 0xFD4AFFFF
 
 
 /******************************************************************/
@@ -661,11 +595,6 @@
 #define XPAR_PSU_OCM_XMPU_CFG_S_AXI_HIGHADDR 0xFFA7FFFF
 
 
-/* Definitions for peripheral PSU_PCIE_DMA */
-#define XPAR_PSU_PCIE_DMA_S_AXI_BASEADDR 0xFD0F0000
-#define XPAR_PSU_PCIE_DMA_S_AXI_HIGHADDR 0xFD0FFFFF
-
-
 /* Definitions for peripheral PSU_PMU_GLOBAL_0 */
 #define XPAR_PSU_PMU_GLOBAL_0_S_AXI_BASEADDR 0xFFD80000
 #define XPAR_PSU_PMU_GLOBAL_0_S_AXI_HIGHADDR 0xFFDBFFFF
@@ -681,11 +610,6 @@
 #define XPAR_PSU_PMU_RAM_S_AXI_HIGHADDR 0xFFDDFFFF
 
 
-/* Definitions for peripheral PSU_QSPI_LINEAR_0 */
-#define XPAR_PSU_QSPI_LINEAR_0_S_AXI_BASEADDR 0xC0000000
-#define XPAR_PSU_QSPI_LINEAR_0_S_AXI_HIGHADDR 0xDFFFFFFF
-
-
 /* Definitions for peripheral PSU_R5_0_ATCM_GLOBAL */
 #define XPAR_PSU_R5_0_ATCM_GLOBAL_S_AXI_BASEADDR 0xFFE00000
 #define XPAR_PSU_R5_0_ATCM_GLOBAL_S_AXI_HIGHADDR 0xFFE0FFFF
@@ -721,11 +645,6 @@
 #define XPAR_PSU_RSA_S_AXI_HIGHADDR 0xFFCEFFFF
 
 
-/* Definitions for peripheral PSU_SATA */
-#define XPAR_PSU_SATA_S_AXI_BASEADDR 0xFD0C0000
-#define XPAR_PSU_SATA_S_AXI_HIGHADDR 0xFD0CFFFF
-
-
 /* Definitions for peripheral PSU_SERDES */
 #define XPAR_PSU_SERDES_S_AXI_BASEADDR 0xFD400000
 #define XPAR_PSU_SERDES_S_AXI_HIGHADDR 0xFD47FFFF
@@ -751,6 +670,11 @@
 #define XPAR_PSU_USB_0_S_AXI_HIGHADDR 0xFF9DFFFF
 
 
+/* Definitions for peripheral PSU_USB_1 */
+#define XPAR_PSU_USB_1_S_AXI_BASEADDR 0xFF9E0000
+#define XPAR_PSU_USB_1_S_AXI_HIGHADDR 0xFF9EFFFF
+
+
 /******************************************************************/
 
 /* Definitions for driver GPIOPS */
@@ -773,35 +697,22 @@
 /******************************************************************/
 
 /* Definitions for driver IICPS */
-#define XPAR_XIICPS_NUM_INSTANCES 2
-
-/* Definitions for peripheral PSU_I2C_0 */
-#define XPAR_PSU_I2C_0_DEVICE_ID 0
-#define XPAR_PSU_I2C_0_BASEADDR 0xFF020000
-#define XPAR_PSU_I2C_0_HIGHADDR 0xFF02FFFF
-#define XPAR_PSU_I2C_0_I2C_CLK_FREQ_HZ 99990005
-
+#define XPAR_XIICPS_NUM_INSTANCES 1
 
 /* Definitions for peripheral PSU_I2C_1 */
-#define XPAR_PSU_I2C_1_DEVICE_ID 1
+#define XPAR_PSU_I2C_1_DEVICE_ID 0
 #define XPAR_PSU_I2C_1_BASEADDR 0xFF030000
 #define XPAR_PSU_I2C_1_HIGHADDR 0xFF03FFFF
-#define XPAR_PSU_I2C_1_I2C_CLK_FREQ_HZ 99990005
+#define XPAR_PSU_I2C_1_I2C_CLK_FREQ_HZ 99999999
 
 
 /******************************************************************/
 
-/* Canonical definitions for peripheral PSU_I2C_0 */
-#define XPAR_XIICPS_0_DEVICE_ID XPAR_PSU_I2C_0_DEVICE_ID
-#define XPAR_XIICPS_0_BASEADDR 0xFF020000
-#define XPAR_XIICPS_0_HIGHADDR 0xFF02FFFF
-#define XPAR_XIICPS_0_I2C_CLK_FREQ_HZ 99990005
-
 /* Canonical definitions for peripheral PSU_I2C_1 */
-#define XPAR_XIICPS_1_DEVICE_ID XPAR_PSU_I2C_1_DEVICE_ID
-#define XPAR_XIICPS_1_BASEADDR 0xFF030000
-#define XPAR_XIICPS_1_HIGHADDR 0xFF03FFFF
-#define XPAR_XIICPS_1_I2C_CLK_FREQ_HZ 99990005
+#define XPAR_XIICPS_0_DEVICE_ID XPAR_PSU_I2C_1_DEVICE_ID
+#define XPAR_XIICPS_0_BASEADDR 0xFF030000
+#define XPAR_XIICPS_0_HIGHADDR 0xFF03FFFF
+#define XPAR_XIICPS_0_I2C_CLK_FREQ_HZ 99999999
 
 
 /******************************************************************/
@@ -909,126 +820,11 @@
 #define  XPAR_XIPIPS_TARGET_PSU_PMU_0_CH3_MASK  XPAR_PSU_IPI_6_BIT_MASK
 #define  XPAR_XIPIPS_TARGET_PSU_PMU_0_CH3_INDEX  6U
 
-/* Definitions for driver PCIEPSU */
-#define XPAR_XPCIEPSU_NUM_INSTANCES 5
-
-/* Definitions for peripheral PSU_PCIE */
-#define XPAR_PSU_PCIE_DEVICE_ID 0
-#define XPAR_PSU_PCIE_BASEADDR 0xFD0E0000
-#define XPAR_PSU_PCIE_HIGHADDR 0xFD0EFFFF
-
-
-/* Definitions for peripheral PSU_PCIE_ATTRIB_0 */
-#define XPAR_PSU_PCIE_ATTRIB_0_DEVICE_ID 1
-#define XPAR_PSU_PCIE_ATTRIB_0_BASEADDR 0xFD480000
-#define XPAR_PSU_PCIE_ATTRIB_0_HIGHADDR 0xFD48FFFF
-
-
-/* Definitions for peripheral PSU_PCIE_HIGH1 */
-#define XPAR_PSU_PCIE_HIGH1_DEVICE_ID 2
-#define XPAR_PSU_PCIE_HIGH1_BASEADDR 0x600000000
-#define XPAR_PSU_PCIE_HIGH1_HIGHADDR 0x7FFFFFFFF
-
-
-/* Definitions for peripheral PSU_PCIE_HIGH2 */
-#define XPAR_PSU_PCIE_HIGH2_DEVICE_ID 3
-#define XPAR_PSU_PCIE_HIGH2_BASEADDR 0x8000000000
-#define XPAR_PSU_PCIE_HIGH2_HIGHADDR 0xBFFFFFFFFF
-
-
-/* Definitions for peripheral PSU_PCIE_LOW */
-#define XPAR_PSU_PCIE_LOW_DEVICE_ID 4
-#define XPAR_PSU_PCIE_LOW_BASEADDR 0xE0000000
-#define XPAR_PSU_PCIE_LOW_HIGHADDR 0xEFFFFFFF
-
-
-/******************************************************************/
-
-/* Canonical definitions for peripheral PSU_PCIE */
-#define XPAR_XPCIEPSU_0_DEVICE_ID XPAR_PSU_PCIE_DEVICE_ID
-#define XPAR_XPCIEPSU_0_BASEADDR 0xFD0E0000
-#define XPAR_XPCIEPSU_0_HIGHADDR 0xFD0EFFFF
-
-/* Canonical definitions for peripheral PSU_PCIE_ATTRIB_0 */
-#define XPAR_XPCIEPSU_1_DEVICE_ID XPAR_PSU_PCIE_ATTRIB_0_DEVICE_ID
-#define XPAR_XPCIEPSU_1_BASEADDR 0xFD480000
-#define XPAR_XPCIEPSU_1_HIGHADDR 0xFD48FFFF
-
-/* Canonical definitions for peripheral PSU_PCIE_HIGH1 */
-#define XPAR_XPCIEPSU_2_DEVICE_ID XPAR_PSU_PCIE_HIGH1_DEVICE_ID
-#define XPAR_XPCIEPSU_2_BASEADDR 0x600000000
-#define XPAR_XPCIEPSU_2_HIGHADDR 0x7FFFFFFFF
-
-/* Canonical definitions for peripheral PSU_PCIE_HIGH2 */
-#define XPAR_XPCIEPSU_3_DEVICE_ID XPAR_PSU_PCIE_HIGH2_DEVICE_ID
-#define XPAR_XPCIEPSU_3_BASEADDR 0x8000000000
-#define XPAR_XPCIEPSU_3_HIGHADDR 0xBFFFFFFFFF
-
-/* Canonical definitions for peripheral PSU_PCIE_LOW */
-#define XPAR_XPCIEPSU_4_DEVICE_ID XPAR_PSU_PCIE_LOW_DEVICE_ID
-#define XPAR_XPCIEPSU_4_BASEADDR 0xE0000000
-#define XPAR_XPCIEPSU_4_HIGHADDR 0xEFFFFFFF
-
-
-/******************************************************************/
-
-/* Definitions for driver QSPIPSU */
-#define XPAR_XQSPIPSU_NUM_INSTANCES 1
-
-/* Definitions for peripheral PSU_QSPI_0 */
-#define XPAR_PSU_QSPI_0_DEVICE_ID 0
-#define XPAR_PSU_QSPI_0_BASEADDR 0xFF0F0000
-#define XPAR_PSU_QSPI_0_HIGHADDR 0xFF0FFFFF
-#define XPAR_PSU_QSPI_0_QSPI_CLK_FREQ_HZ 124987511
-#define XPAR_PSU_QSPI_0_QSPI_MODE 2
-#define XPAR_PSU_QSPI_0_QSPI_BUS_WIDTH 2
-
-
-/******************************************************************/
-
-#define XPAR_PSU_QSPI_0_IS_CACHE_COHERENT 0
-/* Canonical definitions for peripheral PSU_QSPI_0 */
-#define XPAR_XQSPIPSU_0_DEVICE_ID XPAR_PSU_QSPI_0_DEVICE_ID
-#define XPAR_XQSPIPSU_0_BASEADDR 0xFF0F0000
-#define XPAR_XQSPIPSU_0_HIGHADDR 0xFF0FFFFF
-#define XPAR_XQSPIPSU_0_QSPI_CLK_FREQ_HZ 124987511
-#define XPAR_XQSPIPSU_0_QSPI_MODE 2
-#define XPAR_XQSPIPSU_0_QSPI_BUS_WIDTH 2
-#define XPAR_XQSPIPSU_0_IS_CACHE_COHERENT 0
-
-
-/******************************************************************/
-
-/* Definitions for driver RESETPS and CLOCKPS */
-#define XPAR_XCRPSU_NUM_INSTANCES 1U
-
-/* Definitions for peripheral PSU_CR_0 */
-#define XPAR_PSU_CR_DEVICE_ID 0
-
-/******************************************************************/
-
-/* Definitions for peripheral PSU_CRF_APB */
-#define XPAR_PSU_CRF_APB_S_AXI_BASEADDR 0xFD1A0000
-#define XPAR_PSU_CRF_APB_S_AXI_HIGHADDR 0xFD2DFFFF
-
-
-/******************************************************************/
-
-/* Canonical definitions for peripheral PSU_CR_0 */
-#define XPAR_XCRPSU_0_DEVICE_ID 0
-
-/******************************************************************/
-
-
-/* Definitions for peripheral PSU_PMU_IOMODULE */
-#define XPAR_PSU_PMU_IOMODULE_S_AXI_BASEADDR 0xFFD40000
-#define XPAR_PSU_PMU_IOMODULE_S_AXI_HIGHADDR 0xFFD5FFFF
-
-
-/* Definitions for peripheral PSU_LPD_SLCR */
-#define XPAR_PSU_LPD_SLCR_S_AXI_BASEADDR 0xFF410000
-#define XPAR_PSU_LPD_SLCR_S_AXI_HIGHADDR 0xFF4AFFFF
-
+/* Definitions for driver RESETPS */
+#define XPAR_XRESETPS_NUM_INSTANCES 1U
+/* Definitions for peripheral RESETPS */
+#define XPAR_XRESETPS_DEVICE_ID 0
+#define XPAR_XRESETPS_BASEADDR 0xFFFFFFFFU
 
 /******************************************************************/
 
@@ -1052,34 +848,91 @@
 /******************************************************************/
 
 /* Definitions for driver SDPS */
-#define XPAR_XSDPS_NUM_INSTANCES 1
+#define XPAR_XSDPS_NUM_INSTANCES 2
+
+/* Definitions for peripheral PSU_SD_0 */
+#define XPAR_PSU_SD_0_DEVICE_ID 0
+#define XPAR_PSU_SD_0_BASEADDR 0xFF160000
+#define XPAR_PSU_SD_0_HIGHADDR 0xFF16FFFF
+#define XPAR_PSU_SD_0_SDIO_CLK_FREQ_HZ 187499998
+#define XPAR_PSU_SD_0_HAS_CD 1
+#define XPAR_PSU_SD_0_HAS_WP 0
+#define XPAR_PSU_SD_0_BUS_WIDTH 4
+#define XPAR_PSU_SD_0_MIO_BANK 0
+#define XPAR_PSU_SD_0_HAS_EMIO 0
+
 
 /* Definitions for peripheral PSU_SD_1 */
-#define XPAR_PSU_SD_1_DEVICE_ID 0
+#define XPAR_PSU_SD_1_DEVICE_ID 1
 #define XPAR_PSU_SD_1_BASEADDR 0xFF170000
 #define XPAR_PSU_SD_1_HIGHADDR 0xFF17FFFF
-#define XPAR_PSU_SD_1_SDIO_CLK_FREQ_HZ 187481262
-#define XPAR_PSU_SD_1_HAS_CD 1
-#define XPAR_PSU_SD_1_HAS_WP 1
-#define XPAR_PSU_SD_1_BUS_WIDTH 8
+#define XPAR_PSU_SD_1_SDIO_CLK_FREQ_HZ 187499998
+#define XPAR_PSU_SD_1_HAS_CD 0
+#define XPAR_PSU_SD_1_HAS_WP 0
+#define XPAR_PSU_SD_1_BUS_WIDTH 4
 #define XPAR_PSU_SD_1_MIO_BANK 1
 #define XPAR_PSU_SD_1_HAS_EMIO 0
 
 
 /******************************************************************/
 
+#define XPAR_PSU_SD_0_IS_CACHE_COHERENT 0
 #define XPAR_PSU_SD_1_IS_CACHE_COHERENT 0
-/* Canonical definitions for peripheral PSU_SD_1 */
-#define XPAR_XSDPS_0_DEVICE_ID XPAR_PSU_SD_1_DEVICE_ID
-#define XPAR_XSDPS_0_BASEADDR 0xFF170000
-#define XPAR_XSDPS_0_HIGHADDR 0xFF17FFFF
-#define XPAR_XSDPS_0_SDIO_CLK_FREQ_HZ 187481262
+/* Canonical definitions for peripheral PSU_SD_0 */
+#define XPAR_XSDPS_0_DEVICE_ID XPAR_PSU_SD_0_DEVICE_ID
+#define XPAR_XSDPS_0_BASEADDR 0xFF160000
+#define XPAR_XSDPS_0_HIGHADDR 0xFF16FFFF
+#define XPAR_XSDPS_0_SDIO_CLK_FREQ_HZ 187499998
 #define XPAR_XSDPS_0_HAS_CD 1
-#define XPAR_XSDPS_0_HAS_WP 1
-#define XPAR_XSDPS_0_BUS_WIDTH 8
-#define XPAR_XSDPS_0_MIO_BANK 1
+#define XPAR_XSDPS_0_HAS_WP 0
+#define XPAR_XSDPS_0_BUS_WIDTH 4
+#define XPAR_XSDPS_0_MIO_BANK 0
 #define XPAR_XSDPS_0_HAS_EMIO 0
-#define XPAR_XSDPS_0_IS_CACHE_COHERENT 0
+
+/* Canonical definitions for peripheral PSU_SD_1 */
+#define XPAR_XSDPS_1_DEVICE_ID XPAR_PSU_SD_1_DEVICE_ID
+#define XPAR_XSDPS_1_BASEADDR 0xFF170000
+#define XPAR_XSDPS_1_HIGHADDR 0xFF17FFFF
+#define XPAR_XSDPS_1_SDIO_CLK_FREQ_HZ 187499998
+#define XPAR_XSDPS_1_HAS_CD 0
+#define XPAR_XSDPS_1_HAS_WP 0
+#define XPAR_XSDPS_1_BUS_WIDTH 4
+#define XPAR_XSDPS_1_MIO_BANK 1
+#define XPAR_XSDPS_1_HAS_EMIO 0
+
+
+/******************************************************************/
+
+/* Definitions for driver SPIPS */
+#define XPAR_XSPIPS_NUM_INSTANCES 2
+
+/* Definitions for peripheral PSU_SPI_0 */
+#define XPAR_PSU_SPI_0_DEVICE_ID 0
+#define XPAR_PSU_SPI_0_BASEADDR 0xFF040000
+#define XPAR_PSU_SPI_0_HIGHADDR 0xFF04FFFF
+#define XPAR_PSU_SPI_0_SPI_CLK_FREQ_HZ 187499998
+
+
+/* Definitions for peripheral PSU_SPI_1 */
+#define XPAR_PSU_SPI_1_DEVICE_ID 1
+#define XPAR_PSU_SPI_1_BASEADDR 0xFF050000
+#define XPAR_PSU_SPI_1_HIGHADDR 0xFF05FFFF
+#define XPAR_PSU_SPI_1_SPI_CLK_FREQ_HZ 187499998
+
+
+/******************************************************************/
+
+/* Canonical definitions for peripheral PSU_SPI_0 */
+#define XPAR_XSPIPS_0_DEVICE_ID XPAR_PSU_SPI_0_DEVICE_ID
+#define XPAR_XSPIPS_0_BASEADDR 0xFF040000
+#define XPAR_XSPIPS_0_HIGHADDR 0xFF04FFFF
+#define XPAR_XSPIPS_0_SPI_CLK_FREQ_HZ 187499998
+
+/* Canonical definitions for peripheral PSU_SPI_1 */
+#define XPAR_XSPIPS_1_DEVICE_ID XPAR_PSU_SPI_1_DEVICE_ID
+#define XPAR_XSPIPS_1_BASEADDR 0xFF050000
+#define XPAR_XSPIPS_1_HIGHADDR 0xFF05FFFF
+#define XPAR_XSPIPS_1_SPI_CLK_FREQ_HZ 187499998
 
 
 /******************************************************************/
@@ -1095,7 +948,7 @@
 
 /******************************************************************/
 
-#define XPAR_PSU_AMS_REF_FREQMHZ 49.995003
+#define XPAR_PSU_AMS_REF_FREQMHZ 51.724137
 /* Canonical definitions for peripheral PSU_AMS */
 #define XPAR_XSYSMONPSU_0_DEVICE_ID XPAR_PSU_AMS_DEVICE_ID
 #define XPAR_XSYSMONPSU_0_BASEADDR 0xFFA50000
@@ -1104,7 +957,6 @@
 
 /******************************************************************/
 
-#define XPAR_XSYSMONPSU_0_REF_FREQMHZ 49.995003
 /* Definitions for driver TTCPS */
 #define XPAR_XTTCPS_NUM_INSTANCES 12U
 
@@ -1235,6 +1087,41 @@
 #define XPAR_XTTCPS_11_TTC_CLK_CLKSRC 0U
 
 
+/******************************************************************/
+
+/* Definitions for driver UARTNS550 */
+#define XPAR_XUARTNS550_NUM_INSTANCES 2U
+#define XPAR_XUARTNS550_CLOCK_HZ 99999999U
+
+/* Definitions for peripheral AXI_UART16550_0 */
+#define XPAR_AXI_UART16550_0_DEVICE_ID 0U
+#define XPAR_AXI_UART16550_0_BASEADDR 0xA0000000U
+#define XPAR_AXI_UART16550_0_HIGHADDR 0xA000FFFFU
+#define XPAR_AXI_UART16550_0_CLOCK_FREQ_HZ 99999999U
+
+
+/* Definitions for peripheral AXI_UART16550_1 */
+#define XPAR_AXI_UART16550_1_DEVICE_ID 1U
+#define XPAR_AXI_UART16550_1_BASEADDR 0xA0010000U
+#define XPAR_AXI_UART16550_1_HIGHADDR 0xA001FFFFU
+#define XPAR_AXI_UART16550_1_CLOCK_FREQ_HZ 99999999U
+
+
+/******************************************************************/
+
+/* Canonical definitions for peripheral AXI_UART16550_0 */
+#define XPAR_UARTNS550_0_DEVICE_ID 0U
+#define XPAR_UARTNS550_0_BASEADDR 0xA0000000U
+#define XPAR_UARTNS550_0_HIGHADDR 0xA000FFFFU
+#define XPAR_UARTNS550_0_CLOCK_FREQ_HZ XPAR_AXI_UART16550_0_CLOCK_FREQ_HZ
+
+/* Canonical definitions for peripheral AXI_UART16550_1 */
+#define XPAR_UARTNS550_1_DEVICE_ID 1U
+#define XPAR_UARTNS550_1_BASEADDR 0xA0010000U
+#define XPAR_UARTNS550_1_HIGHADDR 0xA001FFFFU
+#define XPAR_UARTNS550_1_CLOCK_FREQ_HZ XPAR_AXI_UART16550_1_CLOCK_FREQ_HZ
+
+
 /******************************************************************/
 
 /* Definitions for driver UARTPS */
@@ -1244,7 +1131,7 @@
 #define XPAR_PSU_UART_0_DEVICE_ID 0
 #define XPAR_PSU_UART_0_BASEADDR 0xFF000000
 #define XPAR_PSU_UART_0_HIGHADDR 0xFF00FFFF
-#define XPAR_PSU_UART_0_UART_CLK_FREQ_HZ 99990005
+#define XPAR_PSU_UART_0_UART_CLK_FREQ_HZ 99999999
 #define XPAR_PSU_UART_0_HAS_MODEM 0
 
 
@@ -1252,7 +1139,7 @@
 #define XPAR_PSU_UART_1_DEVICE_ID 1
 #define XPAR_PSU_UART_1_BASEADDR 0xFF010000
 #define XPAR_PSU_UART_1_HIGHADDR 0xFF01FFFF
-#define XPAR_PSU_UART_1_UART_CLK_FREQ_HZ 99990005
+#define XPAR_PSU_UART_1_UART_CLK_FREQ_HZ 99999999
 #define XPAR_PSU_UART_1_HAS_MODEM 0
 
 
@@ -1262,21 +1149,21 @@
 #define XPAR_XUARTPS_0_DEVICE_ID XPAR_PSU_UART_0_DEVICE_ID
 #define XPAR_XUARTPS_0_BASEADDR 0xFF000000
 #define XPAR_XUARTPS_0_HIGHADDR 0xFF00FFFF
-#define XPAR_XUARTPS_0_UART_CLK_FREQ_HZ 99990005
+#define XPAR_XUARTPS_0_UART_CLK_FREQ_HZ 99999999
 #define XPAR_XUARTPS_0_HAS_MODEM 0
 
 /* Canonical definitions for peripheral PSU_UART_1 */
 #define XPAR_XUARTPS_1_DEVICE_ID XPAR_PSU_UART_1_DEVICE_ID
 #define XPAR_XUARTPS_1_BASEADDR 0xFF010000
 #define XPAR_XUARTPS_1_HIGHADDR 0xFF01FFFF
-#define XPAR_XUARTPS_1_UART_CLK_FREQ_HZ 99990005
+#define XPAR_XUARTPS_1_UART_CLK_FREQ_HZ 99999999
 #define XPAR_XUARTPS_1_HAS_MODEM 0
 
 
 /******************************************************************/
 
 /* Definitions for driver USBPSU */
-#define XPAR_XUSBPSU_NUM_INSTANCES 1
+#define XPAR_XUSBPSU_NUM_INSTANCES 2
 
 /* Definitions for peripheral PSU_USB_XHCI_0 */
 #define XPAR_PSU_USB_XHCI_0_DEVICE_ID 0
@@ -1284,15 +1171,26 @@
 #define XPAR_PSU_USB_XHCI_0_HIGHADDR 0xFE20FFFF
 
 
+/* Definitions for peripheral PSU_USB_XHCI_1 */
+#define XPAR_PSU_USB_XHCI_1_DEVICE_ID 1
+#define XPAR_PSU_USB_XHCI_1_BASEADDR 0xFE300000
+#define XPAR_PSU_USB_XHCI_1_HIGHADDR 0xFE30FFFF
+
+
 /******************************************************************/
 
 #define XPAR_PSU_USB_XHCI_0_IS_CACHE_COHERENT 0
-#define XPAR_PSU_USB_XHCI_0_SUPER_SPEED 1
+#define XPAR_PSU_USB_XHCI_1_IS_CACHE_COHERENT 0
 /* Canonical definitions for peripheral PSU_USB_XHCI_0 */
 #define XPAR_XUSBPSU_0_DEVICE_ID XPAR_PSU_USB_XHCI_0_DEVICE_ID
 #define XPAR_XUSBPSU_0_BASEADDR 0xFE200000
 #define XPAR_XUSBPSU_0_HIGHADDR 0xFE20FFFF
 
+/* Canonical definitions for peripheral PSU_USB_XHCI_1 */
+#define XPAR_XUSBPSU_1_DEVICE_ID XPAR_PSU_USB_XHCI_1_DEVICE_ID
+#define XPAR_XUSBPSU_1_BASEADDR 0xFE300000
+#define XPAR_XUSBPSU_1_HIGHADDR 0xFE30FFFF
+
 
 /******************************************************************/
 
@@ -1310,14 +1208,14 @@
 #define XPAR_PSU_WDT_0_DEVICE_ID 1
 #define XPAR_PSU_WDT_0_BASEADDR 0xFF150000
 #define XPAR_PSU_WDT_0_HIGHADDR 0xFF15FFFF
-#define XPAR_PSU_WDT_0_WDT_CLK_FREQ_HZ 99990005
+#define XPAR_PSU_WDT_0_WDT_CLK_FREQ_HZ 100000000
 
 
 /* Definitions for peripheral PSU_WDT_1 */
 #define XPAR_PSU_WDT_1_DEVICE_ID 2
 #define XPAR_PSU_WDT_1_BASEADDR 0xFD4D0000
 #define XPAR_PSU_WDT_1_HIGHADDR 0xFD4DFFFF
-#define XPAR_PSU_WDT_1_WDT_CLK_FREQ_HZ 99990005
+#define XPAR_PSU_WDT_1_WDT_CLK_FREQ_HZ 100000000
 
 
 /******************************************************************/
@@ -1332,13 +1230,13 @@
 #define XPAR_XWDTPS_1_DEVICE_ID XPAR_PSU_WDT_0_DEVICE_ID
 #define XPAR_XWDTPS_1_BASEADDR 0xFF150000
 #define XPAR_XWDTPS_1_HIGHADDR 0xFF15FFFF
-#define XPAR_XWDTPS_1_WDT_CLK_FREQ_HZ 99990005
+#define XPAR_XWDTPS_1_WDT_CLK_FREQ_HZ 100000000
 
 /* Canonical definitions for peripheral PSU_WDT_1 */
 #define XPAR_XWDTPS_2_DEVICE_ID XPAR_PSU_WDT_1_DEVICE_ID
 #define XPAR_XWDTPS_2_BASEADDR 0xFD4D0000
 #define XPAR_XWDTPS_2_HIGHADDR 0xFD4DFFFF
-#define XPAR_XWDTPS_2_WDT_CLK_FREQ_HZ 99990005
+#define XPAR_XWDTPS_2_WDT_CLK_FREQ_HZ 100000000
 
 
 /******************************************************************/
@@ -1607,9 +1505,4 @@
 
 /******************************************************************/
 
-
-/* Xilinx processor macro for Secure Library (Xilskey) */ 
-
-#define XPAR_XSK_ARM_PLATFORM 1
-
 #endif  /* end of protection macro */
diff --git a/lib/sw_apps/zynqmp_pmufw/misc/xsdps_g.c b/lib/sw_apps/zynqmp_pmufw/misc/xsdps_g.c
index 09c4b35b74..983392ab21 100644
--- a/lib/sw_apps/zynqmp_pmufw/misc/xsdps_g.c
+++ b/lib/sw_apps/zynqmp_pmufw/misc/xsdps_g.c
@@ -35,6 +35,17 @@
 
 XSdPs_Config XSdPs_ConfigTable[XPAR_XSDPS_NUM_INSTANCES] =
 {
+	{
+		XPAR_PSU_SD_0_DEVICE_ID,
+		XPAR_PSU_SD_0_BASEADDR,
+		XPAR_PSU_SD_0_SDIO_CLK_FREQ_HZ,
+		XPAR_PSU_SD_0_HAS_CD,
+		XPAR_PSU_SD_0_HAS_WP,
+		XPAR_PSU_SD_0_BUS_WIDTH,
+		XPAR_PSU_SD_0_MIO_BANK,
+		XPAR_PSU_SD_0_HAS_EMIO,
+		XPAR_PSU_SD_0_IS_CACHE_COHERENT
+	},
 	{
 		XPAR_PSU_SD_1_DEVICE_ID,
 		XPAR_PSU_SD_1_BASEADDR,
diff --git a/lib/sw_apps/zynqmp_pmufw/misc/xusbpsu_g.c b/lib/sw_apps/zynqmp_pmufw/misc/xusbpsu_g.c
index 0fd3626de6..6fd6aa2368 100644
--- a/lib/sw_apps/zynqmp_pmufw/misc/xusbpsu_g.c
+++ b/lib/sw_apps/zynqmp_pmufw/misc/xusbpsu_g.c
@@ -38,7 +38,11 @@ XUsbPsu_Config XUsbPsu_ConfigTable[XPAR_XUSBPSU_NUM_INSTANCES] =
 	{
 		XPAR_PSU_USB_XHCI_0_DEVICE_ID,
 		XPAR_PSU_USB_XHCI_0_BASEADDR,
-		XPAR_PSU_USB_XHCI_0_IS_CACHE_COHERENT,
-		XPAR_PSU_USB_XHCI_0_SUPER_SPEED
+		XPAR_PSU_USB_XHCI_0_IS_CACHE_COHERENT
+	},
+	{
+		XPAR_PSU_USB_XHCI_1_DEVICE_ID,
+		XPAR_PSU_USB_XHCI_1_BASEADDR,
+		XPAR_PSU_USB_XHCI_1_IS_CACHE_COHERENT
 	}
 };
